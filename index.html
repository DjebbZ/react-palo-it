<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>React - Web UIs the Right Way ?</title>

		<meta name="description" content="Presenting React.js at Palo IT, on November 27th 2014">
		<meta name="author" content="Khalid Jebbari">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="css/codemirror.css">

		<style type="text/css">
			.reveal pre { box-shadow: none;}

			button { font-size: 30px;}

			#example-1-code + .CodeMirror,
			#example-2-code + .CodeMirror,
			#example-3-code + .CodeMirror,
			#example-4-code + .CodeMirror {
				height: 500px;
			}

			section .example { margin-top: 30px;}
		</style>

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<div class="slides">
				<section>
					<h1>React</h1>
					<h2>Web UI the Right Way ?</h2>
					<p>aka Kinda the V of MVC</p>
					<p>aka Functional Web UIs</p>
					<p>
						<small>Khalid Jebbari<br />
						aka DjebbZ, <a href="http://twitter.com/Dj3bbZ">@DjebbZ</a><br>
						November 27th, 2014</small>
					</p>
					<p><small>hosted by Palo IT</small></p>
					<img src="images/logo-palo-it.png" width="647" height="146" style="border: none; background: none;" alt="Palo IT">

					<aside class="notes">
						1. Remercier Palo IT <br>
						2. Me présenter <br>
						3. Rappeler que plusieurs attendaient cette préz <br>
					</aside>
				</section>

				<section>
					<h2>Disclaimer</h2>
					<p>
						Talk greatly inspired by this <a href="https://www.youtube.com/watch?v=x7cQ3mrcKaY">video</a> from React's Lead developer.
					</p>

					<aside class="notes">
						Je me suis pas chronométré !
					</aside>
				</section>

				<section>
					<h2>Plan</h2>
					<p>Design of React :</p>
					<ul>
						<li>Separation of concerns</li>
						<li>Component oriented</li>
						<li>Rendering concept</li>
					</ul>
					<hr>
					<p>Going further (if time permits)</p>
				</section>

				<section>
					<h2>Best practice</h2>
					<p>
						Separate template from view logic (Handlebars, Angular.js template, all HTML-like languages VS Backbone View, Angular.js directive, all display-oriented JS code)
					</p>
					<aside class="notes">
						Ex: template PHP/JSP avec des requêtes à la base de données
					</aside>
				</section>

				<section>
					<h2>Wait !?</h2>
					<p>
						Don't they both display the UI ?
					</p>
					<p>
						Display logic and markup are highly cohesive.
					</p>

					<aside class="notes">
						Revoyons ensemble une définition importante. (NEXT SLIDE)
					</aside>
				</section>

				<section>
					<h2>Separation of concers :</h2>
					<q>&ldquo;Reduce coupling, increase cohesion&rdquo;</q>

					<aside class="notes">
						<p>Pas possible dans le web de faire fonctionner un morceau d'HTML dynamique sans la logique associée :
						<ul>
							<li>injection de données</li>
							<li>affichage conditionnel</li>
							<li>écoute d'évènements utilisateurs</li>
							<li>boucle</li>
							<li>règle métiers</li>
						</ul>
						HTML et Javascript complètement interdépendants</p>
						<p>Augmentation du couplage et réduction de la cohésion. Couplage difficile à déceler (quel markup pour tel Javascript ? quel interaction pour tel markup ?). Dans programmation classique couplage plus facile à détecter : système de module, interface, signatures, code.</p>
					</aside>
				</section>

				<section>
					<p>Templates separate technologies, not concerns. And they're underpowered.</p>
					<ul>
						<li>pseudo-programming language</li>
						<li>lacks some context (behavior)</li>
						<li>poor reusability</li>
					</ul>
				</section>

				<section>
					<h2>React</h2>
					<img src="images/logo_react.png" alt="Logo of React.js" width="400" height="400">

					<aside class="notes">
						<ul>
							<li>Libraire javascript pour créer des interfaces web</li>
							<li>Open-sourcée par Facebook en mai 2013</li>
						</ul>
					</aside>
				</section>

				<section id="themes">
					<h2>Hello World example</h2>
					<textarea id="example-1-code"></textarea>
					<div id="example-1" class="example"></div>

					<aside class="notes">
						<ul>
							<li>Réusabilité : ailleurs sur la page</li>
							<li>Idempotence : chaque appel produira ce résultat ...</li>
							<li>... résultat déclaratif</li>
						</ul>
					</aside>
				</section>

				<section>
					<h2>A better syntax : JSX</h2>
					<textarea id="example-2-code"></textarea>
					<div id="example-2" class="example"></div>

					<aside class="notes">
						<ul>
							<li>Ressemble à de l'HTML</li>
							<li>Nécessite une phase de compilation</li>
							<li>JSX est complètement optionel</li>
						</ul>
					</aside>
				</section>

				<section>
					<h2>Question :</h2>
					<q>In programming, what's reusable ?</q>
					<hr>
					<p class="fragment">Functions...</p>
					<p class="fragment">... Pure functions !</p>

					<aside class="notes">
						Le monde merveilleux de la programmation ! <br>
						Fonctions qui ne dépendent que de leurs arguments, qui sont idempotentes, qui n'ont pas de side-effects... <br>
						Pas d'état mutable global, de dépendances implicites, de base de données stateful, de side-effects imprévisibles, random, concurrence, etc.
					</aside>
				</section>

				<section>
					<h2>Ce serait bien si...</h2>
					<p>... on avait des composants graphiques réutilisables, basées sur les principes des fonctions pures, hein ?</p>
					<p>Hein ouais ce serait bien ?</p>
					<p><small>Hein ?</small></p>
				</section>

				<section>
					<h2>Component <=> Function</h2>
					<textarea id="example-3-code"></textarea>
					<div id="example-3" class="example"></div>

					<aside class="notes">
						<p>Comment passer des paramètres à un composant ?</p>
						Fonctions : on peut leur passer des paramètres. Paramètres JSX <=> attributs HTML
					</aside>
				</section>

				<section>
					<h2>React components are just<br>idempotent functions.</h2>
					<p>They <em><b>describe</b></em> the UI at <em><b>any point in time</b></em>,<br> just like the server-rendered page.</p>
				</section>

				<section>
					<h2>Managing UI state is hard</h2>
					<p>Server/client state, user input, complex interactions, etc.</p>
				</section>

				<section>
					<h2>Managing state in <span style="text-decoration: underline;">programming</span> is hard</h2>

					<blockquote cite="http://ce.sharif.edu/courses/90-91/1/ce364-1/resources/root/GoTo/Dijkstra">My second remark is that our intellectual powers are rather geared to master static relations and that our powers to visualize processes evolving in time are relatively poorly developed. For that reason we should do (as wise programmers aware of our limitations) our utmost to shorten the conceptual gap between the static program and the dynamic process, to make the correspondence between the program (spread out in text space) and the process (spread out in time) as trivial as possible.</blockquote>
					<p><small>E. W. Dijkstra, 1968</small></p>

					<aside class="notes">
						Dijkstra dans sa lettre de 1968 "Goto statement considered harmful" nous dit que programmer dans un environnement en constant changement est difficile. <br>

					</aside>
				</section>

				<section>
					<h2>In the 90s, it was easier</h2>
					<p>Just refresh the page when data changes !</p>

					<aside class="notes">
						Les templates affichent les données déjà calculées dans la partie métier. <br>
						C'est ce que fait React !
					</aside>
				</section>

				<section>
					React re-renders the entire component.

					<aside class="notes">
						Quand l'état du composant changes, React le rend entièrement, basé sur la description faite dans la méthode "render"
					</aside>
				</section>

				<section>
					<h2>React Data-flow</h2>
					<p>Data flows from top to bottom. Easy.</p>
					<img src="images/one-way.png" alt="One way flow of data" width="800" height="545">
				</section>

				<section>
					<h2>Everything is declarative</h2>
					<textarea id="example-4-code"></textarea>
					<div id="example-4" class="example"></div>

					<aside class="notes">
						<ul>
							<li>Composant HelloWorld externe</li>
							<li>État explicite</li>
							<li>Imbrication d'un composant externe</li>
							<li>Gestion d'état explicite</li>
						</ul>
					</aside>
				</section>

				<section>
					<h2>Re-rendering ? Expensive and <br> inefficient !</h2>
					<q>&ldquo;And doesn't it mess up form fields and scroll position ?&rdquo;</q>
				</section>

				<section>
					<p>Indeed, the DOM is slow.</p>
					<p class="fragment">Meet the virtual DOM.</p>
				</section>

				<section>
					<p>On every update, React :</p>
					<p>
						<ul>
							<li>builds a new virtual DOM subtree</li>
							<li class="fragment">... diffs it with the old one</li>
							<li class="fragment">... compute the minial set of DOM mutations and puts them in a queue</li>
							<li class="fragment">... and batch executes all updates</li>
						</ul>
					</p>
				</section>

				<section>
					<img src="images/diff-virtual-dom.png" alt="Diff algorithm" width="800" height="351">
				</section>

				<section>
					<p>Diff is fast because :</p>
					<ul>
						<li>it's working on pure Javascript data structures, not the slow DOM</li>
						<li>the algorithm used is O(n)</li>
						<li>you can easily short-circuit it for even better performance</li>
					</ul>
				</section>

				<section>
					<p>Virtual DOM enables :</p>
					<ul>
						<li>unit testable components</li>
						<li>rendering in Node.js</li>
						<li>the Holy Grail</li>
						<li>rendering SVG, VML and Canvas</li>
					</ul>
				</section>

				<section>
					<h2>React in the real world</h2>
					<p class="fragment">Used by numerous and big names on the web. (Facebook, Instagram, AirBnB, Khan Academy, Mozilla, ...). It's solid.</p>
					<p class="fragment">Using it since 11 months. All good</p>
				</section>

				<section>
					<h2>And the other JS libs ?</h2>

					<aside class="notes">
						Backbone : se marie bien avec vu qu'aucun n'impose de structure <br>
						Angular : C'est comme une directive Angular. Mais avec moins de complexités ($scope, transclusion, link et compile functions, etc.). Pas de data-binding dans les deux sens.Possibilité d'utiliser des composants React à la place de directives Angular. <br>
						Ember : Peut s'utiliser à la place des vues/templates Ember. La core team d'Ember va sûrement reprendre le concept de Virtual DOM.
					</aside>
				</section>

				<section>
					<h2>Is React perfect ?</h2>
					<p>No. Nothing is perfect :</p>
					<ul>
						<li>Lacks CSS management to make real components.</li>
						<li>Some overlap with WebComponents</li>
						<li>JSX is a nice syntax, but needs tooling</li>
						<li>No full-stack front-end framework using React</li>
					</ul>
				</section>

				<section>
					<h2>But React is very good</h2>
					<p>Stateless over stateful</p>
					<p>Explicit state management over uncontrolled mutability</p>
					<p>Simple data-flow over unpredictable cascading changes</p>
					<p>Components <em>really</em> reusable</p>
					<p>Not a full stack framework :)</p>
				</section>

				<section>
					<h1>Questions ?</h1>
					<p><small>Images courtesy of <a href="http://twitter.com/bobylito">@bobylito</a></small></p>
				</section>

			</div>

		</div>

	</body>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.min.js"></script>

	<script>

		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: false,
			progress: true,
			history: true,
			slideNumber: true,
			center: true,

			transition: 'none',

			// Optional libraries used to extend on reveal.js
			dependencies: [
				{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
				{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
			]
		});

	</script>

	<script src="js/examples.js"></script>
	<script src="js/codemirror.js"></script>
	<script src="js/javascript.js"></script>
	<script type="text/javascript">
		["example-1-code", "example-2-code", "example-3-code", "example-4-code"].forEach(function(id) {
			// CodeMirror is the best I found to highlight JSX code out of the box.
			// prismjs and highlight.js don't like HTML-like code inside JS
			CodeMirror.fromTextArea(document.getElementById(id), {
				mode: "javascript"
			});
		})
	</script>
</html>
